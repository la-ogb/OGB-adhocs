./* ========================================================================
. *          Name : a1809171.ps
. *   Description : Extract all active FSA records for 2018
. * ...........................CHANGE LOG...................................
. *  apjwh - 09/17/2018 - DEV - Initial Version
. * ===================================================================== */

./* =================
. * Variable Includes
. * ================= */
    INC UTIL_COMMON.CB  ... OGB Common variables for UTIL routine

./* ===================================
. * File & Global Variable Declarations
. * =================================== */

PROGRAM_NAME        INIT    "A1809171"
PROGRAM_DESC        INIT    "Extract 18 FSA"
PROGRAM_NEXT        INIT    "MENU"

PARAM_LIST          LIST WITH NAMES
PARAM_YEAR          CHAR    4
                    LISTEND

./* =============
. * Begin Program
. * ============= */

...Non-Impact scheduler run - Start here
    CALL RUN_NOW
    CHAIN C_NEXT

...Scheduler begins here
    INC SCHED_NP.SR // for use without the printer

.###########################################################################
RUN_NOW LROUTINE
./* Set runtime variables
. */

...Store return stack at program start
    RETCOUNT ORIG_RETURN

... Initialize module ID variables
    MOVE PROGRAM_NAME TO C_PROG
    MOVE PROGRAM_DESC TO C_OPER
    MOVE PROGRAM_NEXT TO C_NEXT
    FILL " " IN C_LABEL:
                C_FILE:
                C_KEYS

... Signal start of program if run from the command line
    IF (C_CMDPAR)
        CALL CMD_START USING C_PROG
    ENDIF

...Set applicable traps
    TRAPSAVE TRAP_DATA
    TRAPCLR ALL
    TRAP QUIT NORESET IF F9

...Get scheduler information
    CALL SCHED_PICK

... Run core logic
    IF (RUN_MODE = "B" | RUN_MODE = "N")
        CALL MAIN_PROCESS
    ENDIF

    RETURN
    ENDROUTINE

.###########################################################################
MAIN_PROCESS LROUTINE
...
    debug
    CALL INITIALIZE
    CALL EXTRACT_FSA
    CALL GENERATE_REPORT
    CALL CUSTOM_EOJ  ... Signal successful completion of job

    RETURN
    ENDROUTINE

.###########################################################################
INITIALIZE LROUTINE
./* Create files, setup runtime variables, and draw the initial screen
. */
    debug ...TODO
    

    RETURN
    ENDROUTINE

.###########################################################################
EXTRACT_FSA LROUTINE
./* Gather only FSA records 
. */
    debug ...TODO
    RETURN
    ENDROUTINE

.###########################################################################
GENERATE_REPORT LROUTINE
./*
. */
    debug ...TODO
    
    RETURN
    ENDROUTINE

./* ==============================
. * Subroutines and Other Includes
. * ============================== */
... MCSI includes found in /nfsgb2/mcsprd/i
... OGB includes found in /mcsapl/i
    INC UTIL_COMMON.SR    // OGB Compilation of Standard UTIL routines

./* ==============
. * End of program
. * ============== */
